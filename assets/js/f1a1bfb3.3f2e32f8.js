"use strict";(self.webpackChunkmobile_wallet_protocol=self.webpackChunkmobile_wallet_protocol||[]).push([[974],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(n),d=r,h=m["".concat(i,".").concat(d)]||m[d]||u[d]||o;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:r,s[1]=l;for(var c=2;c<o;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6723:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const o={},s="Batch requests",l={unversionedId:"spec/batch",id:"spec/batch",title:"Batch requests",description:"To improve UX by minimizing app switches,",source:"@site/docs/spec/batch.md",sourceDirName:"spec",slug:"/spec/batch",permalink:"/wallet-mobile-sdk/docs/spec/batch",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"spec",previous:{title:"Response content",permalink:"/wallet-mobile-sdk/docs/spec/messages-response"},next:{title:"Encryption",permalink:"/wallet-mobile-sdk/docs/spec/encryption"}},i={},c=[{value:"<code>Request</code> has <code>action</code>s",id:"request-has-actions",level:2},{value:"Example request message with three actions batched",id:"example-request-message-with-three-actions-batched",level:3},{value:"<code>Response</code> has <code>value</code>s",id:"response-has-values",level:2},{value:"Example",id:"example",level:3}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"batch-requests"},"Batch requests"),(0,r.kt)("p",null,"To improve UX by minimizing app switches,\nMWP allows client apps to make requests with multiple actions at once.\nWallets should return results in a single response message as well.\nClient can specify whether each action is required or optional to customize the flow."),(0,r.kt)("h2",{id:"request-has-actions"},(0,r.kt)("inlineCode",{parentName:"h2"},"Request")," has ",(0,r.kt)("inlineCode",{parentName:"h2"},"action"),"s"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("inlineCode",{parentName:"li"},"request")," message contains an array of ",(0,r.kt)("inlineCode",{parentName:"li"},"action"),"s"),(0,r.kt)("li",{parentName:"ul"},"Each ",(0,r.kt)("inlineCode",{parentName:"li"},"action")," defines a single JSON RPC call with corresponding parameters in JSON format"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"optional")," boolean property to tell the host wallet to cancel the request if it fails to process non-optional action.")),(0,r.kt)("h3",{id:"example-request-message-with-three-actions-batched"},"Example request message with three actions batched"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "1.0.3",\n  "sender": "AD6aqQNPr4/NRQymzqr14qjlnO9LN5JaEs/XEwEGTno=",\n  "content": {\n    "request": {\n      "actions": [\n        {\n          "paramsJson": "{\\"chainId\\":\\"137\\"}",\n          "method": "wallet_switchEthereumChain",\n          "optional": false\n        },\n        {\n          "paramsJson": "{\\"address\\":\\"0x571a6a108adb08f9ca54fe8605280F9EE0eD4AF6\\",\\"message\\":\\"message\\"}",\n          "method": "personal_sign",\n          "optional": true\n        },\n        {\n          "paramsJson": "{\\"toAddress\\":\\"0\\",\\"fromAddress\\":\\"0x571a6a108adb08f9ca54fe8605280F9EE0eD4AF6\\",\\"chainId\\":\\"137\\",\\"weiValue\\":\\"0\\",\\"data\\":\\"\\"}",\n          "method": "eth_sendTransaction",\n          "optional": false\n        }\n      ]\n    }\n  },\n  "timestamp": 689616588.09238,\n  "callbackUrl": "myappxyz://mycallback/wsegue",\n  "uuid": "84920218-ED92-4DF7-83BC-3CBFD1E5C7E3"\n}\n')),(0,r.kt)("h2",{id:"response-has-values"},(0,r.kt)("inlineCode",{parentName:"h2"},"Response")," has ",(0,r.kt)("inlineCode",{parentName:"h2"},"value"),"s"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("inlineCode",{parentName:"li"},"response")," message contains array of ",(0,r.kt)("inlineCode",{parentName:"li"},"value"),"s"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"value")," can be either",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"result"),": JSON string"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"error"),": error code and message")))),(0,r.kt)("h3",{id:"example"},"Example"),(0,r.kt)("p",null,"TODO"))}u.isMDXComponent=!0}}]);