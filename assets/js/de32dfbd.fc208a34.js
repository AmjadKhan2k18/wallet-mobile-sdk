"use strict";(self.webpackChunkmobile_wallet_protocol=self.webpackChunkmobile_wallet_protocol||[]).push([[452],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>m});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(t),m=a,N=u["".concat(s,".").concat(m)]||u[m]||d[m]||l;return t?r.createElement(N,o(o({ref:n},c),{},{components:t})):r.createElement(N,o({ref:n},c))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,o=new Array(l);o[0]=u;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var p=2;p<l;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},5141:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var r=t(7462),a=(t(7294),t(3905));const l={},o="Message format",i={unversionedId:"spec/format",id:"spec/format",title:"Message format",description:"- JSON -> JSON with encrypted \u2018content\u2019 -> Base64 encoded -> deep link URL",source:"@site/docs/spec/format.md",sourceDirName:"spec",slug:"/spec/format",permalink:"/wallet-mobile-sdk/docs/spec/format",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"specSidebar",previous:{title:"Encryption",permalink:"/wallet-mobile-sdk/docs/spec/encryption"},next:{title:"Handshake",permalink:"/wallet-mobile-sdk/docs/spec/handshake"}},s={},p=[{value:"Example",id:"example",level:2},{value:"handshake",id:"handshake",level:3},{value:"request",id:"request",level:3},{value:"response",id:"response",level:3},{value:"error",id:"error",level:3}],c={toc:p};function d(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"message-format"},"Message format"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"JSON -> JSON with encrypted \u2018content\u2019 -> Base64 encoded -> deep link URL"),(0,a.kt)("li",{parentName:"ul"},"Base64 encoded string of JSON object"),(0,a.kt)("li",{parentName:"ul"},"Content of message prop is encrypted using the access token so that only the wallet can read"),(0,a.kt)("li",{parentName:"ul"},"Allow client to make batched requests")),(0,a.kt)("h2",{id:"example"},"Example"),(0,a.kt)("h3",{id:"handshake"},"handshake"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"URL\n",(0,a.kt)("inlineCode",{parentName:"li"},"https://go.cb-w.com/wsegue?p=eyJ2ZXJzaW9uIjoiMS4yLjMiLCJzZW5kZXIiOiI0UG9QTEFDUjNCb0VxWTJBdSthamRISGRSZStvU0ZaUVwvSkpDU091bHpTYz0iLCJjb250ZW50Ijp7ImhhbmRzaGFrZSI6eyJhcHBJZCI6ImNvbS5teWFwcC5wYWNrYWdlLmlkIiwiY2FsbGJhY2siOiJodHRwczpcL1wvbXlhcHAueHl6XC9uYXRpdmUtc2RrIiwiaW5pdGlhbEFjdGlvbnMiOlt7Im1ldGhvZCI6ImV0aF9zb21lTWV0aG9kIiwicGFyYW1zIjpbInBhcmFtMSIsInBhcmFtMiJdfV19fSwidXVpZCI6IjExMUYzRTI2LTE2N0YtNEJGNS1BQzM4LTZEOTNBNjU2RTMyQiJ9")),(0,a.kt)("li",{parentName:"ul"},"JSON (decoded the URL above. handshake messages are not encrypted)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version" : "0.1.0",\n  "sender" : "bwf9U+VbjmvfBr3p3aoJyOEKS6mq7sSrg56V6FDYMBs=",\n  "content" : {\n    "handshake" : {\n      "appId" : "com.coinbase.NativeWeb3App",\n      "callback" : "https:\\/\\/myapp.xyz\\/mycallback",\n      "initialActions" : [\n        {\n          "paramsJson" : "{}",\n          "method" : "eth_requestAccounts",\n          "optional" : false\n        },\n        {\n          "paramsJson" : "{\\"fromAddress\\":\\"\\",\\"data\\":\\"bWVzc2FnZQ==\\"}",\n          "method" : "personal_sign",\n          "optional" : false\n        }\n      ]\n    }\n  },\n  "uuid" : "634A5C15-0316-4FD1-86FB-4818DBD6C12D"\n}\n')),(0,a.kt)("h3",{id:"request"},"request"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"URL\n",(0,a.kt)("inlineCode",{parentName:"li"},"https://go.cb-w.com/wsegue?p=eyJ2ZXJzaW9uIjoiMS4yLjMiLCJzZW5kZXIiOiJmbW5IZVh3OTNlY000QnFzSXpRTk5zb2FvS0ZxK3NOMHZRaWdvaVNQZ2dvPSIsImNvbnRlbnQiOnsicmVxdWVzdCI6eyJfMCI6IkdQYUwwTWJjbVhoVWU5eUprY0p5dnRJWVJUM3RXNEhcL1lBUmNKTXZGZlZWOWh6OXcya1h3YmxIMEJPcFN2UXI0RVhoV0FVUlwvZGFwWUVMZ2lvTkFXY3IxVlwvY1JoNDVUaFN2SFV1cHRlY0lJR0tLeGxKTWdwZ2RiMWNJRWhNWEdpVElBYkZTblJTOVlwOFowOHJcL3pkcjlBVytFQjRXSXBLcnhTTmVqQXRRTDJWTDByRWE2YzhvM0lodG5DQ1U1SzRpaVVZcTJkamd0eGRJZm1FbmhrTUFCQVwvSm5INFpBPT0ifX0sInV1aWQiOiJEMzg3MUYwRS03QkNFLTQxMjYtQjY1Ny05QjlGOEQ1NEU3N0YifQ%3D%3D")),(0,a.kt)("li",{parentName:"ul"},"encrypted JSON (decoded from the URL above)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "1.2.3",\n  "sender": "oEC2AZndVwTcLs3ixQyxThlHrKBNdBczbWp9OjeglGY=",\n  "content": {\n    "request": {\n      "data": "/LzMCiGCpiYuUHp2vdlQM4V+f7hYygKI2qhX/ZWuFA6/aqZ/bmnWhROK14vtBH3sbrROqfefMXue3rbqLOg1s+xzh6iXoVavhIeCSevugp1ZlERG9q+CSuLXyRR3tou6wdsJ60jOTDjGzLCvcHp2ykglfDUr2qaVRo3i/RXsJRoPrW9CurSM9+TmNZ46aq1Y/K8lBcpq1aFUYSn7+kHHR8xBY+QoPE0yox+dZrvSi7Z16fX3uwZ3NQPmhPqQXpDFEHrZeKEzoIZAPA8NUlrajgY/1mxhbkH9tmM8X5vSG7w="\n    }\n  },\n  "uuid": "3E445386-8CB3-4995-99EC-DCF06A60081C"\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"decrypted JSON (to pass via RN - native bridge)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "1.2.3",\n  "sender": "qSAE/fvQ1cnZvVnKDjiHRyzK6bVQ/qJ7W29DL2aMjns=",\n  "content": {\n    "request": {\n      "actions": [\n        {\n          "paramsJson" : "{}",\n          "method" : "eth_requestAccounts",\n          "optional" : false\n        },\n        {\n          "paramsJson" : "{\\"fromAddress\\":\\"\\",\\"data\\":\\"bWVzc2FnZQ==\\"}",\n          "method" : "personal_sign",\n          "optional" : false\n        }\n      ],\n      "account": {\n        "chain": "eth",\n        "networkId": 17,\n        "address": "0x12345678ABCD"\n      }\n    }\n  },\n  "uuid": "853BFBB5-A6F1-4FBA-B8C6-DC2BE3CCF6DF"\n}\n')),(0,a.kt)("h3",{id:"response"},"response"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"plain response JSON (to pass via RN - native bridge)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "7.13.1",\n  "sender": "u9IB3p8tN8P4U2LvYfaCphd8/bXRN34eTnuQPO4g6zQ=",\n  "content": {\n    "response": {\n      "requestId": "9D34C731-397B-473B-9850-C6F0261BC085",\n      "values": [\n        {\n          "result": {\n            "value": "return value 1"\n          }\n        },\n        {\n          "result": {\n            "value": "return value 2"\n          }\n        },\n        {\n          "error": {\n            "message": "error 1",\n            "code": 1\n          }\n        },\n        {\n          "error": {\n            "message": "error 2",\n            "code": 2\n          }\n        }\n      ]\n    }\n  },\n  "uuid": "C5CDDCF7-7A31-4185-BB6B-7A3B8F9B19BA"\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"encrypted JSON (encrypted the JSON object above)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "7.13.1",\n  "sender": "u9IB3p8tN8P4U2LvYfaCphd8/bXRN34eTnuQPO4g6zQ=",\n  "content": {\n    "response": {\n      "requestId": "9D34C731-397B-473B-9850-C6F0261BC085",\n      "data": "uXqgB78alErYBFXie8gP397igJ18dx+mcQcUV7K44W+96OQxNxJGm3WxEgsGMxeS8Wg1wiiRaXYRghFbwlnJuOLNpIvAiQYMOzJ1IAlFg452hwG7PrCCn6e9/xU5Hc+kzZYio355zSxSuXByo1bItCgNdjp5aocX1kUnZceV7dGjIGv66/z1k93hxGYooH0uCeI2wQ7qaZzJKfUJLgO0NFmj1fbTciv7CoVd8/mQAfHzlgaIhkHB+j4mAw=="\n    }\n  },\n  "uuid": "C5CDDCF7-7A31-4185-BB6B-7A3B8F9B19BA"\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"URL\n",(0,a.kt)("inlineCode",{parentName:"li"},"https://myapp.xyz/native-sdk?p=eyJ2ZXJzaW9uIjoiNy4xMy4xIiwic2VuZGVyIjoidTlJQjNwOHROOFA0VTJMdllmYUNwaGQ4XC9iWFJOMzRlVG51UVBPNGc2elE9IiwiY29udGVudCI6eyJyZXNwb25zZSI6eyJyZXF1ZXN0SWQiOiI5RDM0QzczMS0zOTdCLTQ3M0ItOTg1MC1DNkYwMjYxQkMwODUiLCJkYXRhIjoidVhxZ0I3OGFsRXJZQkZYaWU4Z1AzOTdpZ0oxOGR4K21jUWNVVjdLNDRXKzk2T1F4TnhKR20zV3hFZ3NHTXhlUzhXZzF3aWlSYVhZUmdoRmJ3bG5KdU9MTnBJdkFpUVlNT3pKMUlBbEZnNDUyaHdHN1ByQ0NuNmU5XC94VTVIYytrelpZaW8zNTV6U3hTdVhCeW8xYkl0Q2dOZGpwNWFvY1gxa1VuWmNlVjdkR2pJR3Y2NlwvejFrOTNoeEdZb29IMHVDZUkyd1E3cWFaekpLZlVKTGdPME5GbWoxZmJUY2l2N0NvVmQ4XC9tUUFmSHpsZ2FJaGtIQitqNG1Bdz09In19LCJ1dWlkIjoiQzVDRERDRjctN0EzMS00MTg1LUJCNkItN0EzQjhGOUIxOUJBIn0%3D"))),(0,a.kt)("h3",{id:"error"},"error"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"JSON (error messages are not encrypted)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "7.13.1",\n  "sender": "OzXg53x+wwIW1YCEbvP3sya7MmZT5yCQcArK3GbLmDo=",\n  "content": {\n    "failure": {\n      "requestId": "6C7706C2-B17F-4E96-8D52-C6876C09AECB",\n      "description": "error message from host"\n    }\n  },\n  "uuid": "C6900BD5-25EE-46F4-AB01-EBB8FAB1AC76"\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"URL\n",(0,a.kt)("inlineCode",{parentName:"li"},"https://myapp.xyz/native-sdk?p=eyJ2ZXJzaW9uIjoiNy4xMy4xIiwic2VuZGVyIjoiT3pYZzUzeCt3d0lXMVlDRWJ2UDNzeWE3TW1aVDV5Q1FjQXJLM0diTG1Ebz0iLCJjb250ZW50Ijp7ImZhaWx1cmUiOnsicmVxdWVzdElkIjoiNkM3NzA2QzItQjE3Ri00RTk2LThENTItQzY4NzZDMDlBRUNCIiwiZGVzY3JpcHRpb24iOiJlcnJvciBtZXNzYWdlIGZyb20gaG9zdCJ9fSwidXVpZCI6IkM2OTAwQkQ1LTI1RUUtNDZGNC1BQjAxLUVCQjhGQUIxQUM3NiJ9"))))}d.isMDXComponent=!0}}]);