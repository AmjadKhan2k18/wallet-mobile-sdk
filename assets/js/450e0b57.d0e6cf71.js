"use strict";(self.webpackChunkmobile_wallet_protocol=self.webpackChunkmobile_wallet_protocol||[]).push([[371],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>m});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),p=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(i.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(t),m=r,k=u["".concat(i,".").concat(m)]||u[m]||d[m]||s;return t?a.createElement(k,l(l({ref:n},c),{},{components:t})):a.createElement(k,l({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,l=new Array(s);l[0]=u;var o={};for(var i in n)hasOwnProperty.call(n,i)&&(o[i]=n[i]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<s;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},1085:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>p});var a=t(7462),r=(t(7294),t(3905));const s={},l="Handshake",o={unversionedId:"spec/handshake",id:"spec/handshake",title:"Handshake",description:"For key exchange, client apps make handshake calls to ask wallets to generate and share a key to encrypt subsequent messages on the session.",source:"@site/docs/spec/handshake.md",sourceDirName:"spec",slug:"/spec/handshake",permalink:"/wallet-mobile-sdk/docs/spec/handshake",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"spec",previous:{title:"Encryption",permalink:"/wallet-mobile-sdk/docs/spec/encryption"},next:{title:"Verification",permalink:"/wallet-mobile-sdk/docs/spec/verification"}},i={},p=[{value:"Handshake request message from client",id:"handshake-request-message-from-client",level:2},{value:"<code>appId</code>",id:"appid",level:3},{value:"<code>callback</code>",id:"callback",level:3},{value:"<code>initialActions</code>",id:"initialactions",level:3},{value:"Example request message",id:"example-request-message",level:3},{value:"Response from wallet",id:"response-from-wallet",level:2},{value:"Example response message (success)",id:"example-response-message-success",level:3},{value:"Example response message (failure)",id:"example-response-message-failure",level:3}],c={toc:p};function d(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"handshake"},"Handshake"),(0,r.kt)("p",null,"For key exchange, client apps make ",(0,r.kt)("inlineCode",{parentName:"p"},"handshake")," calls to ask wallets to generate and share a key to encrypt subsequent messages on the session."),(0,r.kt)("h2",{id:"handshake-request-message-from-client"},"Handshake request message from client"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"content")," of a handshake message contains following:"),(0,r.kt)("h3",{id:"appid"},(0,r.kt)("inlineCode",{parentName:"h3"},"appId")),(0,r.kt)("p",null,'Bundle ID (iOS) or application/package ID (Android).\ne.g. "com.coinbase.SampleClient"'),(0,r.kt)("h3",{id:"callback"},(0,r.kt)("inlineCode",{parentName:"h3"},"callback")),(0,r.kt)("p",null,"Sender's URL to receive response from receiver.\nFor the best security measure, ",(0,r.kt)("a",{parentName:"p",href:"https://developer.apple.com/ios/universal-links/"},"universal links")," (or ",(0,r.kt)("a",{parentName:"p",href:"https://developer.android.com/training/app-links"},"app links"),") are recommended."),(0,r.kt)("h3",{id:"initialactions"},(0,r.kt)("inlineCode",{parentName:"h3"},"initialActions")),(0,r.kt)("p",null,"(optional) Actions to request after successful handshake process.\ne.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"eth_requestAccounts")," to get user's eth account info along with the handshake response"),(0,r.kt)("h3",{id:"example-request-message"},"Example request message"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "1.0.3",\n  "sender": "lEC/X3K68rlgOoldMdk0D77738Y7W0mDbMMV5R6VyCE=",\n  "content": {\n    "handshake": {\n      "appId": "com.coinbase.SampleClient",\n      "callback": "myappxyz://mycallback/wsegue",\n      "initialActions": [\n        {\n          "paramsJson": "{}",\n          "method": "eth_requestAccounts",\n          "optional": false\n        }\n      ]\n    }\n  },\n  "timestamp": 689587969.289106,\n  "callbackUrl": "myappxyz://mycallback/wsegue",\n  "uuid": "451711FA-96B6-4955-B6EA-EFA78CEB89F5"\n}\n')),(0,r.kt)("h2",{id:"response-from-wallet"},"Response from wallet"),(0,r.kt)("p",null,"Once the host wallet ",(0,r.kt)("a",{parentName:"p",href:"verification"},"verifies the client app")," and gets approval from the user,\nit generates a key pair for the session and shares it with the caller."),(0,r.kt)("h3",{id:"example-response-message-success"},"Example response message (success)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "1.0.3",\n  "sender": "EnX8x2D6lHzTg8YZCLybHPwivbCBRyFlP8aA235+MBg=",\n  "content": {\n    "response": {\n      "requestId": "5A920962-ECBE-42BC-A956-83A56F0D52F8",\n      "values": [\n        {\n          "result": {\n            "value": "{\\"chain\\":\\"eth\\",\\"networkId\\":1,\\"address\\":\\"0x571a6a108adb08f9ca54fe8605280F9EE0eD4AF6\\"}"\n          }\n        }\n      ]\n    }\n  },\n  "timestamp": 689615011.030334,\n  "uuid": "7446663A-685A-47E5-89E3-C1D37F085330"\n}\n')),(0,r.kt)("h3",{id:"example-response-message-failure"},"Example response message (failure)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": "1.0.3",\n  "sender": "lEC/X3K68rlgOoldMdk0D77738Y7W0mDbMMV5R6VyCE=",\n  "content": {\n    "failure": {\n      "requestId": "B78F510E-DD5C-4477-8350-7550FAC7452E",\n      "description": "Request denied"\n    }\n  },\n  "timestamp": 689611333.369556,\n  "uuid": "E485820B-8F5E-4F8C-9A00-CE5B5B9C6F35"\n}\n')))}d.isMDXComponent=!0}}]);